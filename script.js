document.addEventListener('DOMContentLoaded', function() {
  var texts = [

    " ٦٠- ١ الْمِسْكُ مَخْتُومٌ وَحَقَّ خِتَامُهُ *** إِنْ تَسْأَلِ ( الْمُطَفِّفِينَ ) تُوَافَى",
    " ٦٠- ٢ فَاللَّهُ قَدْ خَلَقَ الْعِبَادَ بِحِكْمَةٍ *** جَعَلَتْ غَرَائِبَ خَلْقِهِ أَصْنَافَا ",
    " ٦٠-٣ فَمِنَ الْخَلاَئِقِ مُؤْمِنُونَ سَليِقَةً * جُبِلُوا عَلَى تَوْحِيدِهِ إِلْطَافَا",
    " ٦٠- ٤ هُمْ عُصْبَةٌ قَدْ أَرَّقَتْهُمْ نَظْرَةٌ * وَعَنِ الْمَضَاجِعِ جَمْعُهُمْ يَتَجَافَى" ,
    " ٦٠-٥ هُمْ أَقْوِيَاءُ بِعِزَّةٍ فِي دِينِهِمْ * وَبَدَوْا إِِذَا أَمَرَ الْمَلِيكُ ضِعَافَا",
    " ٦٠- ٦ مَنْ أَمَّ يَنْبُوعَ الْمَحَبَّةِ شَارِباً * فَلْيَعْشَقِ التَّبْذِيرَ وَالإِسْرَافَ",
    " ٦٠-٧ لَبِسُوا رِدَاءَ الْعِزِّ عِنْدَ كَمَالِهِمْ * وَتَجَاوَزُوا الأَرْبَاعَ وَالأَنْصَافَ,",
    " ٦٠-٨ قَدْ أَثْقَلَ التَّوْحِيدُ حِمْلَ قُلُوبِهِمْ * فَغَدَوْا عَلَى مَا حُمِّلُوهُ خِفَافَا",
    " ٦٠-٩ إِيلاَفُهُمْ بِالْجَمْعِ أَلَّفَ بَيْنَهُمْ * وَأَفَاضَ مُعْطِيهِمْ بِهِمْ إِيلاَفاً",
   " ٦٠- ١٠ حَتَّى إِذَا أَمِنُوا تَأَذَّنَ رَبُّهُمْ * كَرَماً يُطَمْئِنُهُمْ بِهِ لِيُخَافَا",
    " ٦٠ -١١ جَلَّتْ صِفَاتُ الذَّاتِ فَهِيَ مَنيِعَةٌ * بِجَلاَلِهَا لاَ تَقْبَلُ الأَوْصَافَ",
    "٦٠-١٢ إِنَّا صَبَرْنَا وَهُوَ يَحْكُمُ بَيْنَنَا * وَلَقَدْ شَكَرْنَا فَاسْأَلِ ( الأَعْرَافَ ",
   " ٦٠-١٣  تَلْقَى النَّجِيَّ وَبِالضَّلاَلَةِ قَدْ رُمِي * جَهِلُوا عَلَيْهِ وَكَمْ عَفَا لِيُعَافَى",
    " ٦٠-١٤ كَانَ النَّجِيُّ عَلَى هُدىً مِنْ رَبِّهِ * وَلَجَاجُهُمْ صَفْحاً إِلَيْهِ أَضَافَ",
    " ٦٠-١٥ وَانْظُرْ لِعَادٍ سَفَّهُوا هَادٍ لَهُمْ * زَادُوا إِلَى بُهْتَانِهِمْ أَضْعَافَا",
    " ٦٠-١٦ وَإِذَا أَرَدْتَ زِيَادَةً فِي هَذِهِ * وَالْحُكْمَ فِيهَا فَاسْأَلِ الأَحْقَافَ",
    " ٦٠-١٧ وَالْقَاسِيَاتُ قُلُوبُهُمْ عَنْ ذِكْرِنَا * قَدْ أَنْكَرُوا آلآءَنَا إِجْحَافَا",
    " ٦٠-١٨ قَوْمٌ عَمُوا صَمُّوا وَضَاقَتْ أَرْضُهُمْ * وَالْبَعْضُ مِنْهُمْ قَدْ ثَنَى الأَعْطَافَا" ,
    " ٦٠-١٩ خَلَتِ الْقُلُوبُ وخُلِّفَتْ عَنْ سَيْرِهَا * تَرَكُوا وَرَاءَ ظُهُورِهِمْ أَسْلاَفَا",
    " ٦٠-٢٠ وَالْبعْضُ يَرْضَى بِالدَّنِيَّةِ مَغْنَماً * عَيْشَ الْكَفَافِ وَجَنَّةً أَلْفَافَا",
    "٦٠-٢١ لَوْ كَانَ آدَمُ رَبَّنَا ذَا زَلَّةٍ * أَوْ ضَلَّ مَا اسْتَخْلَفْتَهُ اسْتِخْلاَفَا",
    " ٦٠-٢٢ أَوْ كَانَ نُوحٌ ذَا دُعَاءٍ بَاطِلٍ * حَاشَاهُ مَا نَجَّيْتَهُ لِيُضَافَ",
    " ٦٠-٢٣ مَا حَطَّ مِنْ دَاوُدَ أَنْ فَهَّمْتَهَا * سَلْمَانَ لَمَّا يَحْكُمَ الإِنْصَافَ",
   
  ];

  document.getElementById('searchInput').addEventListener('keyup', function() {
      var searchQuery = this.value.trim();
      var normalizedQuery = normalizeArabic(searchQuery);
      var resultsContainer = document.getElementById('searchResults');
      resultsContainer.innerHTML = ''; // Clear previous results
      var matchesCount = 0;

      texts.forEach(function(text) {
          var normalizedText = normalizeArabic(text);
          if (normalizedText.includes(normalizedQuery) && normalizedQuery !== "") {
              matchesCount++;
              var resultDiv = document.createElement('div');
              // يطبق التظليل فقط على الكلمات الموجودة في استعلام البحث والتي تتطابق بالفعل مع النص
var highlightedText = text.replace(new RegExp(`(${searchQuery})`, 'gi'), "<mark>$1</mark>");
              resultDiv.innerHTML = highlightedText;
              
              // إنشاء زر نسخ
              var copyBtn = document.createElement('button');
              copyBtn.textContent = 'نسخ';
              copyBtn.onclick = function() {
                  navigator.clipboard.writeText(text).then(() => {
                      alert('تم نسخ النص إلى الحافظة.');
                  }).catch(err => {
                      console.error('حدث خطأ أثناء النسخ:', err);
                  });
              };
              resultDiv.appendChild(copyBtn);
              
              resultsContainer.appendChild(resultDiv);
          }
      });

      var resultsCountDiv = document.getElementById('resultsCount');
      resultsCountDiv.textContent = `عدد النتائج: ${matchesCount}`; // تحديث عدد النتائج

      if (matchesCount === 0) {
          resultsContainer.innerHTML = '<div>لم يتم العثور على نتائج</div>';
      }
  });

  function normalizeArabic(text) {
      return text.normalize('NFD')
                 .replace(/[\u064B-\u0652]/g, '') // إزالة التشكيل
                 .toLowerCase(); // توحيد حالة الحروف
  }
});




